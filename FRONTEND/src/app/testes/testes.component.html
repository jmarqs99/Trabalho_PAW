<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testes</title>

</head>

<body>


    <h2>Testes</h2>
    <div class="criarTeste">

        <button *ngIf="addingTeste == false" class="btn btn-primary" type="button" (click)="addingTeste = true">Agendar
            Teste</button>
        <form *ngIf="addingTeste" (submit)="addTeste()">
            <label>Número do cartão de cidadão do user do pedido:
                <input [(ngModel)]="teste.nmrCC" name="nmrCC" type="text" placeholder="cartão de cidadão" /><br>
            </label><br>
            <label>ID do pedido:
                <input [(ngModel)]="teste.pedidoId" name="pedidoId" type="text" placeholder="pedidoId" /><br>
            </label><br>


            <!--<label for="date">Data do teste</label>-->

            <!--<input [(ngModel)]="teste.date" name="date" type="date" >
            -->



            <div class="input-group">
                <dl-date-time-picker startView="day" maxView="year" minView="minute" minuteStep="5"
                    [(ngModel)]="teste.date" name="date"></dl-date-time-picker>
            </div>


            <br>

            <button class="btn btn-primary" type="submit">agendar</button><br>

            <button *ngIf="addingTeste == true" class="btn btn-danger" type="button"
                (click)="addingTeste = false">Cancelar</button>
        </form>
    </div>
    <div class="conteiner">
        <div class="table-div">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Apagar Teste</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let t of testesP; let i=index">
                        <td (click)="testeInfo(t._id)" title="Clica para veres/esconderes informações deste teste!">
                            {{ t._id}} </td>
                        <td (click)="deleteTeste(t._id)"> <button class="btn btn-danger">Apagar</button></td>
                    </tr>
                </tbody>
            </table>
            <div class="paginacao">
                <ngb-pagination [collectionSize]="collectionSize" [(page)]="page" [pageSize]="pageSize">
                </ngb-pagination>
                <select class="custom-select" [(ngModel)]="pageSize">
                    <option [ngValue]="5">5/página</option>
                    <option [ngValue]="10">10/página</option>
                    <option [ngValue]="20">20/página</option>
                </select>
                <br>
            </div>
        </div>
        <div class="info" *ngIf="viewingTeste">
            <p>ID do teste: {{currentTeste._id}}</p>
            <p>Nr CC do Utilizador: {{currentTeste.nmrCC}}</p>
            <p>Estado do Teste : {{currentTeste.estadoTeste}} </p>
            <p>Resultado do Teste : {{currentTeste.resultadoTeste}}</p>
            <p>Data do teste: {{currentTeste.date}}</p>
            <button *ngIf="atualizar == false" class="btn btn-primary" type="button"
                (click)="atualizar = true">Atualizar</button>

            <form *ngIf="atualizar" (submit)="update()" class="updateForm">

                <label>Resultado do Teste
                    <select input [(ngModel)]="novoResultado" name="resultadoTeste">
                        <option value="positivo">positivo</option>
                        <option value="negativo">negativo</option>
                        <option value="indefinido">indefinido</option>
                    </select>
                </label>

                <label>Estado do Teste:
                    <select input [(ngModel)]="novoEstado" name="estadoTeste">
                        <option value="Por agendar">Por agendar</option>
                        <option value="agendado">Agendado</option>
                        <option value="finalizado">Finalizado</option>
                    </select>
                </label>

                <div class="input-group">
                    <dl-date-time-picker startView="day" maxView="year" minView="minute" minuteStep="5"
                        [(ngModel)]="teste.date" name="date"></dl-date-time-picker>
                </div>
                <br>
                <button class="btn btn-primary" type="submit">Atualizar</button><br>
                <button *ngIf="atualizar == true" class="btn btn-danger" type="button"
                    (click)="atualizar = false">Cancelar</button>
            </form>
            <br>
        </div>
    </div>
</body>

</html>